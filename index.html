<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ToneCrafter 吉他音色智能体 · Web</title>
  <meta name="description" content="ToneCrafter：吉他音色智能体网页入口。">
  <style>
    :root{--bg:#0f1115;--fg:#e6e6e6;--muted:#9aa4af;--accent:#8fd14f;}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,'PingFang SC','Hiragino Sans GB','Microsoft YaHei','Noto Sans CJK SC',sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{min-height:100%;display:flex;flex-direction:column}
    header{padding:14px 18px;border-bottom:1px solid #1b1f2a;display:flex;align-items:center;gap:12px}
    header .logo{width:28px;height:28px;border-radius:6px;background:linear-gradient(135deg,#30374a,#1b2030)}
    header h1{font-size:16px;margin:0}
    .main{flex:1;display:flex;flex-direction:column}
    .topbar{padding:8px 18px;border-bottom:1px dashed #232836;color:var(--muted);font-size:14px}
    .frame{flex:1;min-height:60vh}
    .frame iframe{width:100%;height:100%;border:0;border-top:1px solid #232836}
    .fallback{padding:24px;text-align:center}
    .btn{display:inline-block;margin-top:10px;padding:10px 16px;border:1px solid #2b3345;border-radius:10px;background:#1b2030;color:#fff;font-weight:600}
    .btn:hover{filter:brightness(1.1)}
    footer{padding:14px 18px;border-top:1px solid #1b1f2a;color:var(--muted);font-size:12px}
    .note{font-size:13px;color:var(--muted)}
    .input{display:flex;gap:8px;margin-top:10px;justify-content:center}
    .input input{width:520px;max-width:90%;padding:10px;border-radius:8px;border:1px solid #2b3345;background:#0f131d;color:#e6e6e6}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <h1>ToneCrafter 吉他音色智能体 · Web 入口</h1>
    </header>
    <div class="topbar">
      将下面的占位链接替换为你的智能体 URL（支持 Coze / 其他平台）。若平台禁止 iframe，将显示跳转按钮。
    </div>
    <main class="main">
      <div class="fallback" id="fallback" style="display:none">
        <p>当前平台禁止在网页内嵌对话。你可以点击下方按钮在新窗口打开智能体：</p>
        <p><a class="btn" id="openBtn" href="#" target="_blank" rel="noopener">在新窗口打开智能体</a></p>
        <p class="note">如果你是站长：可改用平台的 Web Widget/JS SDK 嵌入方式。</p>
      </div>
      <div class="frame" id="frameBox">
        <!-- 替换下面这个链接为你的智能体 URL -->
        <iframe id="botFrame"
          src="YOUR_BOT_URL"
          allow="clipboard-read; clipboard-write; microphone; camera">
        </iframe>
      </div>
    </main>
    <footer>
      <div>© ToneCrafter · 吉他音色智能体</div>
    </footer>
  </div>
  <script>
    (function(){
      var BOT_URL = "YOUR_BOT_URL"; // ←← 在这里换成你的智能体链接
      var frame = document.getElementById('botFrame');
      var fallback = document.getElementById('fallback');
      var btn = document.getElementById('openBtn');
      btn.href = BOT_URL;

      // 如果用户忘了替换，给出提示
      if (BOT_URL === "YOUR_BOT_URL") {
        fallback.style.display = 'block';
        document.getElementById('frameBox').style.display = 'none';
        btn.textContent = "请先编辑 index.html，将 YOUR_BOT_URL 替换为你的智能体链接";
        btn.removeAttribute('target');
        btn.removeAttribute('rel');
        return;
      }

      // 简易的 iframe 限制处理：尝试加载，若被阻止就显示 fallback
      var iframeLoaded = false;
      frame.addEventListener('load', function(){ iframeLoaded = true; });
      setTimeout(function(){
        if(!iframeLoaded){
          // 可能被 X-Frame-Options/SameSite 限制
          fallback.style.display = 'block';
          document.getElementById('frameBox').style.display = 'none';
        }
      }, 1500);
    })();
  </script>
</body>
</html>
